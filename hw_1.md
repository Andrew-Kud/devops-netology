Задача 2:
Выберите один из вариантов платформы в зависимости от задачи. Здесь нет однозначно верного ответа так как все зависит от конкретных условий: финансирование, компетенции специалистов, удобство использования, надежность, требования ИБ и законодательства, фазы луны.
Тип платформы:
физические сервера;
паравиртуализация;
виртуализация уровня ОС;
Задачи:
высоконагруженная база данных MySql, критичная к отказу;
различные web-приложения;
Windows-системы для использования бухгалтерским отделом;
системы, выполняющие высокопроизводительные расчёты на GPU.
Объясните критерии выбора платформы в каждом случае.

Ответ:

Физические серверы предоставляют максимальную производительность. 
Отсутствует слой гипервизора, ресурсы полностью контролируются операционной системой. 
Основной недостаток — высокие затраты на оборудование, неиспользованные ресурсы при переменной нагрузке, сложность масштабирования.


Аппаратная виртуализация использует гипервизор на уровне железа с поддержкой технологий VT-x (Intel) или AMD-V.
Каждая виртуальная машина получает полный доступ к изолированному набору ресурсов.
Потери производительности составляют 5-10% для CPU-операций.
Обеспечивает поддержку различных ОС в одной инфраструктуре и высокую степень изоляции.


Паравиртуализация требует модификации ядра гостевой ОС для взаимодействия с гипервизором через API.
Достигает более высокой производительности, чем полная виртуализация, но требует специальных драйверов и сложнее в управлении.


Виртуализация уровня ОС использует общее ядро хостовой ОС и создаёт изолированные пространства имён.
Минимальные затраты ресурсов, практически нативная производительность, мгновенный запуск.
Ограничение: все контейнеры должны использовать одну и ту же ОС или её версию.



1.Высоконагруженная база данных MySQL, критична к отказу:
Физические серверы или аппаратная виртуализация с выделенным хранилищем.

I/O производительность и latency — критичны больше всего. В виртуализированной среде потери 10-20% на операциях ввода-вывода. Используйте выделённые LUN, SSD, SR-IOV для сети. Обязательна синхронная репликация и механизм автоматического восстановления.
Если потери 10-20% производительности неприемлемы — физические серверы. Иначе KVM/Hyper-V с выделённым хранилищем.



2.. Различные веб-приложения:
Контейнеризация (Docker + Kubernetes) или облачные VDS на KVM.
Требуется масштабируемость при переменной нагрузке, минимальные затраты на лицензирование. Контейнеры обеспечивают мгновенный запуск новых экземпляров и высокую плотность размещения. Доступность сервиса важнее надёжности отдельного сервера.
Docker + Kubernetes для Linux-приложений (экономия, автоматическое масштабирование). VDS на KVM для специфических окружений.



3. Windows-системы для бухгалтерского отдела:
аппаратная виртуализация Hyper-V или VMware vSphere.

Hyper-V экономит на лицензировании Windows. VMware лучше поддерживает USB Passthrough для аппаратных ключей 1С.



4. Системы с высокопроизводительными расчётами на GPU:
Облачные серверы с GPU Passthrough или физические серверы с GPU.
GPU Passthrough обеспечивает нативную производительность — одна ВМ получает весь GPU. vGPU позволяет разделить GPU между машинами, но производительность ниже. Облако выгодно для временных задач, физические серверы — для постоянных вычислений.

---

Задача 3:
Выберите подходящую систему управления виртуализацией для предложенного сценария. Опишите ваш выбор.
Сценарии:
100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

Ответ:

1.
Proxmox (ткрытый гипервизор на базе KVM с встроенной системой управления кластером).

2.
Для сложной Windows ориентированной инфраструктуры с требованиями к высокой доступности и автоматизации oVirt (upstream для Red Hat Virtualization) — лучший выбор.


3.
Proxmox или XCP-ng.
Если нужна наиболее универсальная платформа — Proxmox VE. Если критична максимальная производительность, особенно для I/O-интенсивных задач Xen — XCP-ng.


4.
Hyper-V Server 2019 или встроенный Hyper-V в Windows Server.
В крайнем случае Proxmox.

5.
Proxmox с LXC контейнерами.

---

Задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет?

Ответ:

Отсутствие единой платформы управления.
Увеличение времени на управление, риск ошибок, невозможность применить единую политику ко всей инфраструктуре.
Сложность миграции между платформами.
етерогенная среда создаёт vendor lock-in на уровне инфраструктуры.
Отступления от выбранного гипервизора затруднены и дороги.
Разнородность в механизмах обеспечения отказоустойчивости и репликации.
Усложнение процесса восстановления после сбоя, невозможность гарантировать RTO/RPO для всех машин одновременно.
Ограничения в распределении нагрузки(Технологии динамического распределения ресурсов работают только внутри кластера одного гипервизора).
Несовместимость в управлении сетью и хранилищем.
Каждая система требует собственного мониторинга и оптимизации пропускной способности.
Требования к компетенциям сисадминов, он олжен быть опытным в каждой платформе.
Сложность интеграции с системами безопасности и мониторинга.
Гетерогенная среда требует больше лицензий, специалистов и инструментов.

Если отступление от гетерогенной среды невозможно (например, после слияния компаний или постепенной миграции):
1. Внедрение единого слоя управления (платфорвы поддерживающие несколько гипервизоров) - кубернетис, облака, vinchi, veeam.
2. Четкое разделение нагрузок по гипервизорам. Вместо хаотичного распределения машин по платформам, создать чёткую политику.
3. Стандартизация образов и конфигураций. "золотые образы" для каждого типа нагрузки нке зависимо от гипервизора в универсальном формате OVA/OVF и конвертацией под конкретную платформу.
4. Централизованное резервное копирование и восстановление (единые политики резервного копирования, RTO и RPO для всей инфраструктуры).
5. Унификация мониторинга и логирования (забикс, прометеус), а так же ELK для логирования.
6. Документирование. 

Создавал ли я гетерогенную среду? - нет, т.к это всегда технический долг.
